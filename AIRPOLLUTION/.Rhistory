nitrates <- numeric()
resultado <- numeric()
j=0
for (i in 1:n){
if (casoscompletos$casos [i] > threshold){
airdata <- read.csv(my_files[casoscompletos$location[i]])
j=j+1
sulfates <- airdata[,2]
nitrates <- airdata[,3]
resultado [j]  <- cor (sulfates[!is.na(sulfates)],nitrates[!is.na(nitrates)])
}
}
resultado
}
corr(750)
corr <-  function( threshold = 0,x='specdata'){
my_files<- file.path(x,list.files(x))
n=length(my_files)
a <- numeric(n)
b <- numeric(n)
for (i in 1:n){
a [i] <- i
b [i] <- sum(complete.cases(read.csv(my_files[i])))
}
casoscompletos <- data.frame('location'=a, 'casos'=b)
sulfates <- numeric()
nitrates <- numeric()
resultado <- numeric()
j=0
for (i in 1:n){
if (casoscompletos$casos [i] > threshold){
airdata <- read.csv(my_files[casoscompletos$location[i]])
j=j+1
sulfates <- airdata[,2]
nitrates <- airdata[,3]
series <- data.frame (complete.cases((sulfates,nitrates)))
resultado [j]  <- cor (series[,1], series[,2])
}
}
resultado
}
corr <-  function( threshold = 0,x='specdata'){
my_files<- file.path(x,list.files(x))
n=length(my_files)
a <- numeric(n)
b <- numeric(n)
for (i in 1:n){
a [i] <- i
b [i] <- sum(complete.cases(read.csv(my_files[i])))
}
casoscompletos <- data.frame('location'=a, 'casos'=b)
sulfates <- numeric()
nitrates <- numeric()
resultado <- numeric()
j=0
for (i in 1:n){
if (casoscompletos$casos [i] > threshold){
airdata <- read.csv(my_files[casoscompletos$location[i]])
j=j+1
sulfates <- airdata[,2]
nitrates <- airdata[,3]
series <- data.frame (complete.cases(sulfates,nitrates))
resultado [j]  <- cor (series[,1], series[,2])
}
}
resultado
}
corr(750)
corr <-  function( threshold = 0,x='specdata'){
my_files<- file.path(x,list.files(x))
n=length(my_files)
a <- numeric(n)
b <- numeric(n)
for (i in 1:n){
a [i] <- i
b [i] <- sum(complete.cases(read.csv(my_files[i])))
}
casoscompletos <- data.frame('location'=a, 'casos'=b)
sulfates <- numeric()
nitrates <- numeric()
resultado <- numeric()
j=0
for (i in 1:n){
if (casoscompletos$casos [i] > threshold){
airdata <- read.csv(my_files[casoscompletos$location[i]])
j=j+1
sulfates <- airdata[,2]
nitrates <- airdata[,3]
series <- data.frame (complete.cases(sulfates,nitrates))
#  resultado [j]  <- cor (series[,1], series[,2])
}
}
series
}
corr(750)
corr <-  function( threshold = 0,x='specdata'){
my_files<- file.path(x,list.files(x))
n=length(my_files)
a <- numeric(n)
b <- numeric(n)
for (i in 1:n){
a [i] <- i
b [i] <- sum(complete.cases(read.csv(my_files[i])))
}
casoscompletos <- data.frame('location'=a, 'casos'=b)
sulfates <- numeric()
nitrates <- numeric()
resultado <- numeric()
j=0
for (i in 1:n){
if (casoscompletos$casos [i] > threshold){
airdata <- read.csv(my_files[casoscompletos$location[i]])
j=j+1
sulfates <- airdata[,2]
nitrates <- airdata[,3]
series <- data.frame (complete.cases(sulfates,nitrates))
resultado [j]  <- cor (sulfates(series), nitrates(series))
}
}
resultado
}
corr(750)
corr <-  function( threshold = 0,x='specdata'){
my_files<- file.path(x,list.files(x))
n=length(my_files)
a <- numeric(n)
b <- numeric(n)
for (i in 1:n){
a [i] <- i
b [i] <- sum(complete.cases(read.csv(my_files[i])))
}
casoscompletos <- data.frame('location'=a, 'casos'=b)
sulfates <- numeric()
nitrates <- numeric()
resultado <- numeric()
j=0
for (i in 1:n){
if (casoscompletos$casos [i] > threshold){
airdata <- read.csv(my_files[casoscompletos$location[i]])
j=j+1
sulfates <- airdata[,2]
nitrates <- airdata[,3]
series <- data.frame (complete.cases(sulfates,nitrates))
resultado [j]  <- cor (sulfates[series], nitrates[series])
}
}
resultado
}
corr(750)
corr <-  function( threshold = 0,x='specdata'){
my_files<- file.path(x,list.files(x))
n=length(my_files)
a <- numeric(n)
b <- numeric(n)
for (i in 1:n){
a [i] <- i
b [i] <- sum(complete.cases(read.csv(my_files[i])))
}
casoscompletos <- data.frame('location'=a, 'casos'=b)
sulfates <- numeric()
nitrates <- numeric()
resultado <- numeric()
j=0
for (i in 1:n){
if (casoscompletos$casos [i] > threshold){
airdata <- read.csv(my_files[casoscompletos$location[i]])
j=j+1
sulfates <- airdata[,2]
nitrates <- airdata[,3]
series <- complete.cases(sulfates,nitrates)
resultado [j]  <- cor (sulfates[series], nitrates[series])
}
}
resultado
}
corr(750)
cr<- corr(150)
head(cr)
sumary (cr)
summary (cr)
cr <-corr (400)
head (cr)
summary (cr)
cr <-corr (5000)
summary (cr)
length(cr)
cr <-corr ()
summary (cr)
length(cr)
corr <-  function( threshold = 0,x='specdata'){
my_files<- file.path(x,list.files(x))
n=length(my_files)
a <- numeric(n)
b <- numeric(n)
for (i in 1:n){
a [i] <- i
b [i] <- sum(complete.cases(read.csv(my_files[i])))
}
casoscompletos <- data.frame('loc'=a, 'casos'=b)
sulfates <- numeric()
nitrates <- numeric()
resultado <- numeric()
j=0
for (i in 1:n){
if (casoscompletos$casos [i] > threshold){
airdata <- read.csv(my_files[casoscompletos$loc[i]])
j=j+1
sulfates <- airdata[,2]
nitrates <- airdata[,3]
full <- complete.cases(sulfates,nitrates)
resultado [j]  <- cor (sulfates[full], nitrates[full])
}
}
resultado
}
cr <-corr (400)
sumary (cr)
corr <-  function( threshold = 0,x='specdata'){
my_files<- file.path(x,list.files(x))
n=length(my_files)
a <- numeric(n)
b <- numeric(n)
for (i in 1:n){
a [i] <- i
b [i] <- sum(complete.cases(read.csv(my_files[i])))
}
casoscompletos <- data.frame('loc'=a, 'casos'=b)
sulfates <- numeric()
nitrates <- numeric()
resultado <- numeric()
j=0
for (i in 1:n){
if (casoscompletos$casos [i] > threshold){
airdata <- read.csv(my_files[casoscompletos$loc[i]])
j=j+1
sulfates <- airdata[,2]
nitrates <- airdata[,3]
full <- complete.cases(sulfates,nitrates)
resultado [j]  <- cor (sulfates[full], nitrates[full])
}
}
resultado
}
cr <-corr (400)
sumary (cr)
summary (cr)
pollutantmean<-  function( id=1,pollutant = 'sulfate',x='specdata'){
my_files<- file.path(x,list.files(x))
total<-0
datos <-0
if (pollutant == 'sulfate') columna = 2
if (pollutant == 'nitrate') columna = 3
for (n in id){
airdata <- read.csv(my_files[n])
totalparcial <- sum(airdata[,columna], na.rm=TRUE)
datosparcial <- sum(!is.na(airdata[,columna]))
total <- total + totalparcial
datos <- datos + datosparcial
}
total/datos
}
pollutantmean("specdata", "sulfate", 1:10)
pollutantmean<-  function( x='specdata',pollutant = 'sulfate',id=1){
my_files<- file.path(x,list.files(x))
total<-0
datos <-0
if (pollutant == 'sulfate') columna = 2
if (pollutant == 'nitrate') columna = 3
for (n in id){
airdata <- read.csv(my_files[n])
totalparcial <- sum(airdata[,columna], na.rm=TRUE)
datosparcial <- sum(!is.na(airdata[,columna]))
total <- total + totalparcial
datos <- datos + datosparcial
}
total/datos
}
pollutantmean("specdata", "sulfate", 1:10)
pollutantmean("specdata", "nitrate", 70:72)
pollutantmean("specdata", "sulfate", 34)
pollutantmean("specdata", "nitrate")
pollutantmean("specdata", "nitrate",1:332)
complete <-  function(x='specdata', id=1){
my_files<- file.path(x,list.files(x))
a <- numeric(length(id))
b <- numeric(length(id))
for (i in 1:length(id)){
a [i] <- id[i]
b [i] <- sum(complete.cases(read.csv(my_files[id[i]])))
}
data.frame('location'=a, 'casos'=b)
}
id=1
cc <- complete("specdata", c(6, 10, 20, 34, 100, 200, 310))
print(cc$nobs)
complete <-  function(x='specdata', id=1){
my_files<- file.path(x,list.files(x))
a <- numeric(length(id))
b <- numeric(length(id))
for (i in 1:length(id)){
a [i] <- id[i]
b [i] <- sum(complete.cases(read.csv(my_files[id[i]])))
}
data.frame('location'=a, 'nobs'=b)
}
cc <- complete("specdata", c(6, 10, 20, 34, 100, 200, 310))
print(cc$nobs)
cc <- complete("specdata", 54)
print(cc$nobs)
RNGversion("3.5.1")
set.seed(42)
cc <- complete("specdata", 332:1)
use <- sample(332, 10)
print(cc[use, "nobs"])
cr <- corr("specdata")
cr <- sort(cr)
RNGversion("3.5.1")
set.seed(868)
out <- round(cr[sample(length(cr), 5)], 4)
print(out)
corr <-  function( x='specdata', threshold = 0){
my_files<- file.path(x,list.files(x))
n=length(my_files)
a <- numeric(n)
b <- numeric(n)
for (i in 1:n){
a [i] <- i
b [i] <- sum(complete.cases(read.csv(my_files[i])))
}
casoscompletos <- data.frame('loc'=a, 'casos'=b)
sulfates <- numeric()
nitrates <- numeric()
resultado <- numeric()
j=0
for (i in 1:n){
if (casoscompletos$casos [i] > threshold){
airdata <- read.csv(my_files[casoscompletos$loc[i]])
j=j+1
sulfates <- airdata[,2]
nitrates <- airdata[,3]
full <- complete.cases(sulfates,nitrates)
resultado [j]  <- cor (sulfates[full], nitrates[full])
}
}
resultado
}
cr <- corr("specdata")
cr <- sort(cr)
RNGversion("3.5.1")
set.seed(868)
out <- round(cr[sample(length(cr), 5)], 4)
print(out)
cr <- corr("specdata", 129)
cr <- sort(cr)
n <- length(cr)
RNGversion("3.5.1")
set.seed(197)
out <- c(n, round(cr[sample(n, 5)], 4))
print(out)
cr <- corr("specdata", 2000)
n <- length(cr)
cr <- corr("specdata", 1000)
cr <- sort(cr)
print(c(n, round(cr, 4)))
x<- matrix (1:20,55,4)
x
cr <- corr("specdata", 129)
cr <- sort(cr)
n <- length(cr)
RNGversion("3.5.1")
set.seed(197)
out <- c(n, round(cr[sample(n, 5)], 4))
print(out)
x<- matrix (1:20,5,4)
x
y <- 2*x
2*x
plot(3*x)
hist(3*x)
lapply (x, mean)
tapply(x,2, mean)
tapply(x, 1, sum())
tapply(x, 1, sum
)
x
y <- (1,)
y<- [1,]
y<- x[1,]
y
z<- [2,]
z<- x[2,0]
z
z<- x[2,]
z
lapply (x, mean)
lapply (y, mean)
lapply (c(y,z), mean)
serie(1:20, rnorm(50), rchisq(20))
serie<- (1:20, rnorm(50), rchisq(20))
serie<- list(1:20, rnorm(50), rchisq(20))
?rchisq
serie<- list(1:20, rnorm(50), rchisq(20,5))
serie
lapply(serie, mean)
sapply (serie,mean)
?tapply(vector, index, function)
?tapply
x
serie
tapply (serie, 2, mean)
tapply (serie, C(1,2,3), mean)
log(-1)
debug (cor)
?debug
corr <-  function( x='specdata', threshold = 0){
my_files<- file.path(x,list.files(x))
n=length(my_files)
a <- numeric(n)
b <- numeric(n)
for (i in 1:n){
a [i] <- i
b [i] <- sum(complete.cases(read.csv(my_files[i])))
}
casoscompletos <- data.frame('loc'=a, 'casos'=b)
sulfates <- numeric()
# nitrates <- numeric()
resultado <- numeric()
j=0
for (i in 1:n){
if (casoscompletos$casos [i] > threshold){
airdata <- read.csv(my_files[casoscompletos$loc[i]])
j=j+1
sulfates <- airdata[,2]
nitrates <- airdata[,3]
full <- complete.cases(sulfates,nitrates)
resultado [j]  <- cor (sulfates[full], nitrates[full])
}
}
resultado
}
cor(700)
corr(100)
corr('specdata',100)
corr('specdata',100)
q
debug(corr)
corr('specdata',100)
corr('specdata',100)
source (corr.R)
setwd("D:/MIS DOCUMENTOS/DATA SCIENCE/AIRPOLLUTION")
source(corr.R)
source ('corr.R')
?source
getwd()
list.dirs()
list.files()
source ("corr.R")
str(corr)
source ('corr.R')
corr('specdata',100)
corr('specdata',100)
x<- rnorm(100)
plot(x)
x<- rnorm(1000)
plot(x)
x<- rnorm(10000)
plot(x)
hist(x)
y<- pnorm(0.25)
hist(y)
y
corr <-  function( x='specdata', threshold = 0){
my_files<- file.path(x,list.files(x))
n=length(my_files)
a <- numeric(n)
b <- numeric(n)
for (i in 1:n){
a [i] <- i
b [i] <- sum(complete.cases(read.csv(my_files[i])))
}
casoscompletos <- data.frame('loc'=a, 'casos'=b)
sulfates <- numeric()
nitrates <- numeric()
resultado <- numeric()
j=0
for (i in 1:n){
if (casoscompletos$casos [i] > threshold){
airdata <- read.csv(my_files[casoscompletos$loc[i]])
j=j+1
sulfates <- airdata[,2]
nitrates <- airdata[,3]
full <- complete.cases(sulfates,nitrates)
resultado [j]  <- cor (sulfates[full], nitrates[full])
}
}
resultado
}
system.time(corr(700))
getwd()
system.time(corr('specdata',700))
q
?debug
debug (off)
debuggingState()
?debuggingState()
system.time(corr('specdata',700))
source (corr)
source ('corr.R')
system.time(corr('specdata',700))
Rprof (corr('specdata',700))
Rprof('corr.R')
Rprof('corr.R')
